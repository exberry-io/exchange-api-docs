# Reporting

Refer [here](../../ws/reporting-api.md) for more details on Reporting APIs.

## Alleged Trades

Any participant can use the `allegedTrades` API to retrieve the full list of Alleged Trades. Both the reporting party and the counterparty can retrieve via this API.

{% hint style="info" %}
qualifier: `v1/exchange.reporting/mp/allegedTrades`
{% endhint %}

### Request

<table><thead><tr><th width="166.33333333333331">Parameter</th><th width="123">Type</th><th>Description</th></tr></thead><tbody><tr><td>dateFrom</td><td>DateTime (GMT)</td><td><p>Optional</p><p>Search for the Alleged Trades that Created At â‰¥ dateFrom. Format:YYYY-MM-DDThh:mm:ss[.SSS]</p></td></tr><tr><td>dateTo</td><td>DateTime (GMT)</td><td><p>Optional</p><p>Search for the Alleged Trades that Created At &#x3C; dateTo . Format: YYYY-MM-DDThh:mm:ss[.SSS]</p></td></tr><tr><td>status</td><td>eNum</td><td><p>Optional</p><p>Alleged Trades status- search for Alleged Trades with that status</p><ul><li>Active</li><li>Cancelled</li><li>Matched</li></ul><p>Empty Status = All statuses</p></td></tr><tr><td>instrument </td><td>String</td><td><p>Optional </p><p>Search for the Alleged Trades of that instrument.</p><p>Mandatory if <code>allegedTradeId</code> or <code>externalTradeId</code> is sent.<br></p><p>Note: symbol is per the event time and not request time.</p></td></tr><tr><td>mpId </td><td>int</td><td><p>Optional<br>Search for the Alleged Trades by MP (by ID)</p><p>Search on both sides of the trade.</p></td></tr><tr><td>accountIds</td><td>[]String</td><td><p>Optional</p><p>Array of account Ids </p><p>Search for account ids (party.role=1001 and party.source=D)</p></td></tr><tr><td>allegedTradeId</td><td>int</td><td>Optional Search for the Alleged Trades by allegedTradeId</td></tr><tr><td>externalTradeId </td><td>int</td><td>Optional Search for the Alleged Trades by externalTradeId</td></tr><tr><td>orderBy</td><td>Object</td><td><p>Optional</p><p>object with 2 parameters:</p><ul><li>field (String)</li><li>direction (Asc, Desc) direction</li></ul><p>If nothing or invalid field was sent the default is [createdAt, Desc]</p></td></tr><tr><td>limit</td><td>Int</td><td><p>Optional</p><p>How many records to include in each page </p><p>If nothing was sent default is 25</p><p>Max value = 100</p></td></tr><tr><td>offset</td><td>Int</td><td><p>Optional</p><p>Which record to start send from (if you want page 3 and there are 50 records per page offset should be 150) </p><p>If nothing was sent default is 0 (=first record)</p></td></tr></tbody></table>

### **Response**

`allegedTrades` response provides close to real time list of all current Alleged Trades for the requested period with the entire details of them.



<table><thead><tr><th width="165.53013956314607">Field</th><th width="581.9291014014839">Description</th></tr></thead><tbody><tr><td>allegedTradeId</td><td>Unique id generated by the system for the alleged trade</td></tr><tr><td>externalTradeId</td><td>From <a href="trade-report-api.md#createtradereport">createTradeReport</a> request</td></tr><tr><td>instrumentId</td><td>Unique id of the instrument</td></tr><tr><td>instrument</td><td>Current Instrument symbol of the RFQ</td></tr><tr><td>buy</td><td><p>Side object - buy </p><p>Refer the side object defined below</p></td></tr><tr><td>sell</td><td><p>Side object - sell</p><p>Refer the side object defined below</p></td></tr><tr><td>status</td><td><p>One of the below options:</p><ul><li>Active = alleged trade can be matched with another alleged trade</li><li>Matched = Alleged trade is matched by the system</li><li>Cancelled = Alleged trade is cancelled</li></ul></td></tr><tr><td>price</td><td>From <a href="trade-report-api.md#createtradereport">createTradeReport</a> request</td></tr><tr><td>quantity</td><td>From <a href="trade-report-api.md#createtradereport">createTradeReport</a> request</td></tr><tr><td>tradeType</td><td>From <a href="trade-report-api.md#createtradereport">createTradeReport</a> request</td></tr><tr><td>parties</td><td><p>Optional </p><p>In case was sent on <code>createTradeReport</code></p></td></tr><tr><td>flow</td><td><p>One of the below options:</p><ul><li>AllegedSystemMatch - the trade should be matched by the system with an Alleged Trade reported by the counterparty</li></ul></td></tr><tr><td>expireTime</td><td><p>Expiration time of the Alleged Trade. Added by the system.</p><p>Format:  YYYY-MM-DDThh:mm:ss.SSSSSS</p></td></tr><tr><td>cancelReason</td><td><p>Optional</p><p>In case of status = Cancelled, one of the below options:</p><ul><li>Expiration - when the alleged trade is cancelled due to expiration.</li><li>CancelRequest - when the alleged trade is cancelled by the reporting MP. </li><li>InstrumentExpiration - when the alleged trade is cancelled due to instrument expiration.</li><li>MassCancelRequest - when the alleged trade is cancelled due to mass cancel request</li><li>TradingCutoff - When mass canceled at trading Cutoff times</li></ul></td></tr><tr><td>createdAt</td><td><p>eventTimestamp of the alleged trade creation</p><p>format YYYY-MM-DDThh:mm:ss.SSSSSS</p></td></tr><tr><td>lastEventTimestamp</td><td><p>eventTimestamp of the last event of the alleged trade</p><p>format YYYY-MM-DDThh:mm:ss.SSSSSS</p></td></tr><tr><td>lastEventId</td><td>eventId of the last event of the Alleged Trade</td></tr></tbody></table>

#### **Side Object**

<table><thead><tr><th width="152">Field</th><th>Description</th></tr></thead><tbody><tr><td>mpId</td><td><p>mpId of the side</p><p>Always returned for both side</p></td></tr><tr><td>mpName</td><td><p>Current MP Name of the side</p><p>Always returned for both side</p></td></tr><tr><td>accountType</td><td><p>Optional</p><p>accountType of the side MP</p><p>Returned only for the owner MP of the side</p></td></tr><tr><td>parties</td><td><p>parties of the side MP</p><p>Returned only for the owner MP of the side</p></td></tr></tbody></table>

### **Error Codes**

<table><thead><tr><th width="152">Code</th><th>Message</th></tr></thead><tbody><tr><td>1</td><td><code>Temporary failure to retrieve this data</code></td></tr><tr><td>1007</td><td><code>Invalid session</code></td></tr><tr><td>1008</td><td><code>Insufficient permissions</code></td></tr><tr><td>1001</td><td><code>Wrong [FieldName] format</code> or<br><code>Wrong Status</code> or<br><code>dateTo must be greater than dateFrom</code></td></tr><tr><td>1103</td><td><code>Missing fields: [Fieldname]</code></td></tr></tbody></table>

### **Samples**

{% tabs %}
{% tab title="Request" %}
```javascript
{
  "q": "v1/exchange.reporting/mp/allegedTrades",
  "sid": 10,
  "d": {
    "dateFrom": "2020-10-01T00:00:01",
    "dateTo": "2030-11-01T00:00:01"
  }
}
```
{% endtab %}

{% tab title="Response" %}
```javascript
{
  "q": "v1/exchange.reporting/mp/allegedTrades",
  "sid": 10,
  "d": {
    "allegedTrades": [
      {
        "allegedTradeId": 2,
        "externalTradeId": 10000002,
        "instrumentId": 22667,
        "instrument": "BBB",
        "buy": {
          "mpId": 14,
          "mpName": "JPM-1",
          "accountType": "Client",
          "parties": [
            {
              "id": "123",
              "source": "D",
              "role": 38
            }
          ]
        },
        "sell": {
          "mpId": 19,
          "mpName": "JPM-2"
        },
        "status": "Cancelled",
        "price": 100.95,
        "quantity": 2,
        "tradeType": "Block",
        "flow": "AllegedSystemMatch",
        "cancelReason": "Expiration",
        "createdAt": "2024-06-13T11:10:20.415958",
        "lastEventTimestamp": "2024-06-13T18:30:00.00057",
        "lastEventId": 9
      }
    ],
    "count": 1
  }
}
```
{% endtab %}
{% endtabs %}

