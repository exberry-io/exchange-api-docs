# Initiator Trading

## submitRFQ

The `submitRFQ` API is used to create a new RFQ in the exchange.&#x20;

A response is received with `rfqStatus=Accepted` if the request is valid. This means the RFQ passed all validations and was accepted by the system. The response contains `rfqId`, the unique identifier the system generates. An invalid `submitRFQ` request is rejected with an error message.&#x20;

In case a response is not received within the timeout window, user can

1. **Retry** using the same `mpRfqId` which will result
   * Rejection in case that previous RFQ was accepted
   * Success in case that previous RFQ was not accepted
2. **Cancel** the RFQ using `mpRfqId`

`mpRfqId` is a unique identifier and should not be used for more than one RFQ. Note: system might accept already used `mpRfqId` after predefined period but it is not recommended to use same `mpRfqId` twice.

{% hint style="info" %}
qualifier: `v1/exchange.market/submitRFQ`
{% endhint %}

### **Request**

<table><thead><tr><th width="175">Parameter</th><th width="115.33333333333331">Type</th><th>Description</th></tr></thead><tbody><tr><td>mpRfqId</td><td>Long</td><td>Market participant’s id for the RFQ</td></tr><tr><td>instrument</td><td>String</td><td>Instrument symbol</td></tr><tr><td>side</td><td>Enum</td><td><p>One of the below options:</p><ul><li>Buy - request for quote to buy the instrument </li><li>Sell - request for quote to sell the instrument</li></ul></td></tr><tr><td>quantity</td><td>Decimal</td><td>RFQ quantity</td></tr><tr><td>expireTime <code>optional</code></td><td>UTC Time</td><td><p>Optional</p><p>Expiration time of the RFQ<br>Format: epoch time in seconds<br><br>if not set, system sets using current time + maxRFQExpireTimePeriod</p></td></tr><tr><td>accountType</td><td>Enum</td><td>Account type Client or House</td></tr><tr><td>parties</td><td>[] Object</td><td>Array of party objects, see details below.<br>Max number of parties =20 </td></tr></tbody></table>

Party specification:&#x20;

<table><thead><tr><th width="112">Name</th><th width="165.33333333333331">Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>Party id<br>Max length = 20 </td></tr><tr><td>source</td><td>Char</td><td>Party source</td></tr><tr><td>role</td><td>Int</td><td>Party role </td></tr></tbody></table>

Sample:

```json
    "parties": [
      {
        "id": "ID123",
        "source": "D",
        "role": 12
      },
      {
        "id": "user123",
        "source": "D",
        "role": 13
      }
    ]
```



### **Response**

| Parameter | Type   | Description                                   |
| --------- | ------ | --------------------------------------------- |
| rfqId     | Long   | Unique id generated by the system for the RFQ |
| rfqStatus | String | RFQ status: ‘Accepted’                        |



### **Error Codes**

<table><thead><tr><th width="128">Code</th><th>Message</th></tr></thead><tbody><tr><td>1</td><td><code>Exchange is unavailable</code></td></tr><tr><td>1000</td><td><code>Missing fields: [Fieldname]</code> or<br><mark style="color:blue;">(NEW v1.27.0)</mark> <code>Party of source=[ConfiguredParty.source] and role=[ConfiguredParty.role] is required</code></td></tr><tr><td>1001</td><td><p><code>[FieldName] must be > 0</code> or</p><p><code>Wrong side</code> or</p><p><code>Wrong mpRfqId</code> or</p><p><code>Wrong expireTime</code> or</p><p><code>[FieldName] must be ≤ [maxLong/10^ fieldPrecision]</code> or</p><p><code>Wrong [FieldName]</code> or</p><p><code>RFQ is not allowed in the instrument</code></p></td></tr><tr><td>1002</td><td><code>mpRfqId is already in use</code></td></tr><tr><td>1003</td><td><code>Market is closed</code></td></tr><tr><td>1004</td><td><code>Instrument trading is not allowed</code></td></tr><tr><td>1005</td><td><code>Quantity precision is [QuantityPrecision]</code></td></tr><tr><td>1006</td><td><code>Minimum quantity is [MinOrderQuantity]</code> or<br><code>Maximum quantity is [MaxOrderQuantity]</code> or<br><code>Quantity increment is [quantityIncrement]</code></td></tr><tr><td>1007</td><td><code>Invalid session</code></td></tr><tr><td>1008</td><td><code>Insufficient permissions</code></td></tr><tr><td>1009</td><td><code>Instrument trading is halted</code></td></tr><tr><td>1010</td><td><code>Instrument [Instrument] not found</code></td></tr><tr><td>1011</td><td><code>Permission denied for this instrument</code></td></tr><tr><td>1018</td><td><code>Trading is not allowed</code></td></tr><tr><td>1032</td><td><code>Account not found</code> or<br><code>Party is not allowed</code></td></tr></tbody></table>



### **Samples**

{% tabs %}
{% tab title="Request" %}
```json
{
  "q": "v1/exchange.market/submitRFQ",
  "sid": 1,
  "d": {
    "mpRfqId": 123,
    "instrument": "ABC",
    "side": "Buy",
    "quantity": 2,
    "expireTime": 1689758604
  }
}
```
{% endtab %}

{% tab title="Success Response" %}
```javascript
{
  "q": "v1/exchange.market/submitRFQ",
  "sid": 1,
  "d": {
    "rfqId": 1234,
    "rfqStatus": "Accepted"
  }
}
```
{% endtab %}

{% tab title="Failure Response" %}
```javascript
{
  "sig": 2,
  "q": "v1/exchange.market/submitRFQ",
  "errorType": "500",
  "sid": 1,
  "d": {
    "errorCode": 1010,
    "errorMessage": "Instrument AMZ11 not found"
  }
}
```
{% endtab %}
{% endtabs %}



## cancelRFQ

The `cancelRFQ` API is used by the RFQ initiator to cancel an RFQ. The system automatically cancels all active Quotes related to an RFQ when it is cancelled.

A response is received with `rfqId` if the request is successful. This means the request passed all validations, and the RFQ has been cancelled with its active Quotes. An invalid cancelRFQ request is rejected with an error message.

In case a response is not received within the timeout window, user can

1. **Retry** using the same parameters which will result
   * Rejection in case that previous request was accepted
   * Success in case that previous request was not accepted

{% hint style="info" %}
qualifier: `v1/exchange.market/cancelRFQ`
{% endhint %}



### **Request**

<table><thead><tr><th width="254">Parameter</th><th width="115.33333333333331">Type</th><th>Description</th></tr></thead><tbody><tr><td>mpRfqId</td><td>Long</td><td><p>Market participant id for the RFQ.</p><p>Not mandatory if rfqId was sent.</p></td></tr><tr><td>rfqId</td><td>Long</td><td>Unique id generated by the system for the RFQ.<br>Not mandatory if mpRfqId was sent.</td></tr><tr><td>instrument</td><td>String</td><td>Instrument symbol</td></tr></tbody></table>



### **Response**

| Parameter | Type | Description                                   |
| --------- | ---- | --------------------------------------------- |
| rfqId     | Long | Unique id generated by the system for the RFQ |



### **Error Codes**

<table><thead><tr><th width="128">Code</th><th>Message</th></tr></thead><tbody><tr><td>1</td><td><code>Exchange is unavailable</code></td></tr><tr><td>1001</td><td><p><code>Wrong [FieldName]</code> or</p><p><code>RFQ is not allowed in the instrument</code> or</p></td></tr><tr><td>1003</td><td><code>Market is closed</code></td></tr><tr><td>1004</td><td><code>Instrument trading is not allowed</code></td></tr><tr><td>1007</td><td><code>Invalid session</code></td></tr><tr><td>1008</td><td><code>Insufficient permissions</code></td></tr><tr><td>1009</td><td><code>Instrument trading is halted</code></td></tr><tr><td>1010</td><td><code>Instrument [Instrument] not found</code></td></tr><tr><td>1011</td><td><code>Permission denied for this instrument</code></td></tr><tr><td>1018</td><td><code>Trading is not allowed</code></td></tr><tr><td>1100</td><td><code>RFQ not found for that instrument</code></td></tr><tr><td>1103</td><td><code>Missing fields: [Fieldname]</code></td></tr><tr><td>1104</td><td><code>Please use only one from rfqId or mpRfqId</code></td></tr></tbody></table>



### **Samples**

{% tabs %}
{% tab title="Request" %}
```json
{
  "q": "v1/exchange.market/cancelRFQ",
  "sid": 1,
  "d": {
    "rfqId": 123,
    "instrument": "ABC",
    }
}
```
{% endtab %}

{% tab title="Success Response" %}
```javascript
{
  "q": "v1/exchange.market/cancelRFQ",
  "sid": 1,
  "d": {
    "rfqId": 678
  }
}
```
{% endtab %}

{% tab title="Failure Response" %}
```javascript
{
  "sig": 2,
  "q": "v1/exchange.market/cancelRFQ",
  "errorType": "500",
  "sid": 1,
  "d": {
    "errorCode": 1010,
    "errorMessage": "Instrument AMZ11 not found"
  }
}
```
{% endtab %}
{% endtabs %}



## acceptQuote

The `acceptQuote` API is used by the RFQ initiator to accept a Quote received.

A response is received with `tradeId` if the request is successful. This means the request passed all validations and a trade is created by the system. The response contains `tradeId`, the unique identifier the system generates. An invalid `acceptQuote` request is rejected with an error message.

In case a response is not received within the timeout window, user can

1. **Retry** using the same parameters which will result
   * Rejection in case that previous request was accepted
   * Success in case that previous request was not accepted

{% hint style="info" %}
qualifier: `v1/exchange.market/acceptQuote`
{% endhint %}



### **Request**

<table><thead><tr><th width="254">Parameter</th><th width="115.33333333333331">Type</th><th>Description</th></tr></thead><tbody><tr><td>quoteId</td><td>Long</td><td>Unique id generated by the system for the Quote that initiator is accepting.</td></tr><tr><td>instrument</td><td>String</td><td>Instrument symbol</td></tr><tr><td>side</td><td>Enum</td><td><p>Side of the initiator</p><ul><li>Buy - when accepting a <code>Sell</code> Quote</li><li>Sell - when accepting a <code>Buy</code> Quote</li></ul></td></tr><tr><td>price</td><td>Decimal</td><td>price of the Quote</td></tr><tr><td>quantity</td><td>Decimal</td><td>quantity of the Quote</td></tr></tbody></table>



### **Response**

| Parameter | Type | Description                                     |
| --------- | ---- | ----------------------------------------------- |
| tradeId   | Long | Unique id generated by the system for the trade |



### **Error Codes**

<table><thead><tr><th width="128">Code</th><th>Message</th></tr></thead><tbody><tr><td>1</td><td><code>Exchange is unavailable</code></td></tr><tr><td>1000</td><td><code>Missing fields: [Fieldname]</code></td></tr><tr><td>1001</td><td><p><code>[FieldName] must be > 0</code> or</p><p><code>Wrong mpQuoteId</code> or</p><p><code>[FieldName] must be ≤ [maxLong/10^ fieldPrecision]</code> or</p><p><code>[FieldName] must ≥ [minLong/10^ fieldPrecision]</code> or</p><p><code>Wrong [FieldName]</code> or</p><p><code>RFQ is not allowed in the instrument</code> or</p><p><code>[FieldName] must be = [ExpectedFieldValue]</code> </p></td></tr><tr><td>1003</td><td><code>Market is closed</code></td></tr><tr><td>1004</td><td><code>Instrument trading is not allowed</code></td></tr><tr><td>1005</td><td><code>Quantity precision is [QuantityPrecision]</code> or<br><code>[FieldName] precision is[PricePrecision]</code></td></tr><tr><td>1006</td><td><code>Minimum quantity is [MinOrderQuantity]</code> or<br><code>Maximum quantity is [MaxOrderQuantity]</code> or<br><code>Quantity increment is [quantityIncrement]</code></td></tr><tr><td>1007</td><td><code>Invalid session</code></td></tr><tr><td>1008</td><td><code>Insufficient permissions</code></td></tr><tr><td>1009</td><td><code>Instrument trading is halted</code></td></tr><tr><td>1010</td><td><code>Instrument [Instrument] not found</code></td></tr><tr><td>1011</td><td><code>Permission denied for this instrument</code></td></tr><tr><td>1012</td><td><code>Price breaches [FieldName] of [FieldValue]</code></td></tr><tr><td>1013</td><td><code>Maximum Quote value is [maxOrderValue]</code></td></tr><tr><td>1014</td><td><code>Price tick size is [tickSize]</code></td></tr><tr><td>1018</td><td><code>Trading is not allowed</code></td></tr><tr><td>1041</td><td><code>RFQ [rfqId] not found for that instrument</code> or<br><code>Quote [quoteId] not found for that instrument</code></td></tr></tbody></table>



### **Samples**

{% tabs %}
{% tab title="Request" %}
```json
{
  "q": "v1/exchange.market/acceptQuote",
  "sid": 1,
  "d": {
    "quoteId": 123,
    "instrument": "ABC",
    "side":"Buy",
    "price":13.2,
    "quantity":100
    }
}
```
{% endtab %}

{% tab title="Success Response" %}
```javascript
{
  "q": "v1/exchange.market/acceptQuote",
  "sid": 1,
  "d": {
    "tradeId": 678
  }
}
```
{% endtab %}

{% tab title="Failure Response" %}
```javascript
{
  "sig": 2,
  "q": "v1/exchange.market/acceptQuote",
  "errorType": "500",
  "sid": 1,
  "d": {
    "errorCode": 1010,
    "errorMessage": "Instrument AMZ11 not found"
  }
}
```
{% endtab %}
{% endtabs %}





